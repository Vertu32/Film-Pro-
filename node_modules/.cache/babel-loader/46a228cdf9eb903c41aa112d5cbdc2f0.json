{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\IT\\\\myProjects\\\\filmpro\\\\src\\\\pages\\\\FilmIdPage.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport PostService from \"../api/PostService\";\nimport { ArrContext } from \"../context\";\nimport { useFetching } from \"../hooks/useFetching\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst FilmIdPage = function () {\n  _s();\n\n  const params = useParams();\n  const [film, setFilm] = useState({});\n  const filmArr = params.id.split('_');\n  const filmId = filmArr[0];\n\n  const filmPage = () => {\n    let count = 1;\n    let filmInd = filmArr[1];\n\n    while (filmInd > 19) {\n      filmInd = filmInd - 20;\n      count = count + 1;\n    }\n\n    return count;\n  };\n\n  console.log(filmPage(), filmId);\n  const [fetchPosts, isPostsLoading, postError] = useFetching(async () => {\n    const posts = await PostService.getAll(filmPage());\n    console.log(posts);\n    setFilm([...posts].filter(el => {\n      if (el.kinopoiskId == filmId) {\n        return el;\n      }\n    })[0]);\n  });\n  useEffect(() => {\n    fetchPosts();\n  }, []);\n  console.log(film);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"filmId__wrapper\",\n    children: film.nameRu ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filmId__block\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: film.nameRu\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 34\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"filmId__img\",\n        src: film.posterUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info__text\",\n        children: [\"\\u0416\\u0430\\u043D\\u0440: \", film.genres[0].genre]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 33\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info__text\",\n        children: [\"\\u0420\\u0435\\u0439\\u0442\\u0438\\u043D\\u0433 \\u041A\\u0418\\u041D\\u041E\\u041F\\u041E\\u0418\\u0421\\u041A: \", film.ratingKinopoisk]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 34\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info__text\",\n        children: [\" \\u0420\\u0435\\u0439\\u0442\\u0438\\u043D\\u0433 Imdb: \", film.ratingKinopoisk]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 33\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info__text\",\n        children: [\"\\u0413\\u043E\\u0434 \\u043F\\u0440\\u043E\\u0438\\u0437\\u0432\\u043E\\u0434\\u0441\\u0442\\u0432\\u0430: \", film.year]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 33\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info__text\",\n        children: [\"\\u0421\\u0442\\u0440\\u0430\\u043D\\u0430 \\u043F\\u0440\\u043E\\u0438\\u0437\\u0432\\u043E\\u0434\\u0441\\u0442\\u0432\\u0430: \", film.countries[0].country]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 33\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 26\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 28\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n};\n\n_s(FilmIdPage, \"ROYGB7DkJX0qFNoizozlq5aQDjQ=\", false, function () {\n  return [useParams, useFetching];\n});\n\n_c = FilmIdPage;\nexport default FilmIdPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"FilmIdPage\");","map":{"version":3,"sources":["C:/Users/Admin/Desktop/IT/myProjects/filmpro/src/pages/FilmIdPage.jsx"],"names":["React","useContext","useEffect","useState","useParams","PostService","ArrContext","useFetching","FilmIdPage","params","film","setFilm","filmArr","id","split","filmId","filmPage","count","filmInd","console","log","fetchPosts","isPostsLoading","postError","posts","getAll","filter","el","kinopoiskId","nameRu","posterUrl","genres","genre","ratingKinopoisk","year","countries","country"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport PostService from \"../api/PostService\";\r\nimport { ArrContext } from \"../context\";\r\nimport { useFetching } from \"../hooks/useFetching\";\r\n\r\nconst FilmIdPage = function() {\r\n\r\n    const params = useParams()\r\n    const [film, setFilm] = useState({})\r\n    \r\n     \r\n    const filmArr = params.id.split('_')\r\n    const filmId = filmArr[0]\r\n    const filmPage = () => {\r\n        let count = 1\r\n        let filmInd = filmArr[1]\r\n        while (filmInd>19) {\r\n            filmInd = filmInd-20\r\n            count = count+1\r\n        }\r\n        return count\r\n    }  \r\n\r\n    console.log(filmPage(), filmId)\r\n\r\n\r\n    const [fetchPosts, isPostsLoading, postError] = useFetching(async () => {\r\n   \r\n        const posts = await PostService.getAll(filmPage());  \r\n        console.log(posts)\r\n        setFilm([...posts].filter(el =>  {\r\n              if(el.kinopoiskId == filmId) {\r\n\r\n                  return el\r\n              }\r\n          })[0])\r\n    \r\n      })\r\n    \r\n    \r\n    \r\n      useEffect(() => {\r\n        fetchPosts();\r\n        }, [])\r\n\r\n    console.log(film)\r\n    \r\n    return(\r\n        <div className=\"filmId__wrapper\"> \r\n             \r\n                   {film.nameRu\r\n                        ?<div className=\"filmId__block\"> \r\n                                 <h1>\r\n                                {film.nameRu}\r\n                                </h1>\r\n\r\n                            <img className=\"filmId__img\" src={film.posterUrl}/> \r\n                            \r\n                            \r\n                                <div className=\"info__text\">Жанр: {film.genres[0].genre}</div> \r\n                                 <div className=\"info__text\">Рейтинг КИНОПОИСК: {film.ratingKinopoisk}</div>\r\n                                <div className=\"info__text\"> Рейтинг Imdb: {film.ratingKinopoisk}</div>  \r\n                                <div className=\"info__text\">Год производства: {film.year}</div>  \r\n                                <div className=\"info__text\">Страна производства: {film.countries[0].country}</div>   \r\n                        </div> \r\n                        \r\n                        :  <div>Загрузка...</div>}\r\n                            \r\n            \r\n                \r\n                \r\n            \r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FilmIdPage;"]},"metadata":{},"sourceType":"module"}